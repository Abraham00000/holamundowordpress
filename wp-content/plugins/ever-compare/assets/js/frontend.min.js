!function(a){"use strict";var e=a("body"),o=a(".htcompare-popup");function t(e){a(".htcompare-table").length>0&&a(".htcompare-table").replaceWith(e.table)}e.on("click","a.htcompare-btn",function(n){var r=a(this),d=r.data("product_id"),c=r.data("added-text");if("yes"===evercompare.popup){if(n.preventDefault(),r.hasClass("added"))return e.find(".htcompare-popup").addClass("open"),!0}else if(r.hasClass("added"))return!0;n.preventDefault(),r.addClass("loading"),a.ajax({url:evercompare.ajaxurl,data:{action:"ever_compare_add_to_compare",id:d},dataType:"json",method:"GET",success:function(a){a.table?(t(a),o.addClass("open")):console.log("Something wrong loading compare data")},error:function(a){console.log("Something wrong with AJAX response.")},complete:function(){r.removeClass("loading").addClass("added"),r.html('<span class="htcompare-btn-text">'+c+"</span>")}})}),e.on("click","a.htcompare-remove",function(e){var o=a(".htcompare-table");e.preventDefault();var n=a(this),r=n.data("product_id");o.addClass("loading"),n.addClass("loading"),jQuery.ajax({url:evercompare.ajaxurl,data:{action:"ever_compare_remove_from_compare",id:r},dataType:"json",method:"GET",success:function(a){a.table?t(a):console.log("Something wrong loading compare data")},error:function(a){console.log("Something wrong with AJAX response.")},complete:function(){o.removeClass("loading"),n.addClass("loading")}})}),e.on("click",".htcompare-popup-close",function(a){o.removeClass("open")})}(jQuery);